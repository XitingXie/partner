// Load environment variables from .env file
def envFile = rootProject.file(".env")
def env = [:]

if (envFile.exists()) {
    println "Loading environment variables from .env file"
    envFile.eachLine { line ->
        if (line.trim() && !line.startsWith('#')) {
            def (key, value) = line.tokenize('=')
            if (key && value) {
                key = key.trim()
                value = value.trim()
                // Remove quotes if present
                value = value.replaceAll('^"|"$|^\'|\'$', '')
                env[key] = value
                // Set environment variable
                System.setProperty(key, value)
                project.ext.set(key, value)
                println "Loaded env variable: ${key}=${value}"
            }
        }
    }
} else {
    println "Warning: .env file not found at ${envFile.absolutePath}"
}

ext {
    env = env
} 